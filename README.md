# ReactNativeWithCPP
A Skeleton React Native App that uses [Djinni](https://github.com/dropbox/djinni) &amp; [Gyp](https://chromium.googlesource.com/external/gyp.git) to link C++ code (Simple HelloWorld C++) to React Native.

Currently Only Android works (IOS NOT Done YET).

You can use this as a base for your project

## Requirements:
  1. **Android-NDK** (for compiling android)
  2. **xcode** (for running ios)
	3. **Make**


## How to run it
``` 
git clone --recursive git@github.com:abdoofathy95/ReactNativeWithCPP.git
npm install
```

android:
```
react-native run-android
```
ios:
```
react-native run-ios
```
## Project Structure
```


|_ android/
    |_ app
      |_ jni
        |_ Android.mk -> with each build, calls the makefile to rebuild GypAndroid.mk & includes it
        |_ Application.mk -> contains supported architectures, NDK version, name of the library (C++ code written by user)
      |_ src/main/java/com/reactar
        |_ TestCPP.java -> Class that imports the Compiled C++ library & expose methods to ReactNative JS.
        |_ TestPackage.java -> Simple Class that Implements ReactPackage to include TestCPP.java as a Native Module 
        |_ MainApplication.java -> Default File Generated by ReactNative. (edited only getPackages() to include TestPackage.java)
        |_ MainActivity.java -> Default File Generated by ReactNative.
      |_ build.gradle -> Default File Generated by ReactNative. (added only ndkBuild task to trigger build using NDK each time gradlew is executed)
|_ ios -> Default Files Generated by ReactNative.
|_ src
  |_ cpp -> all cpp & hpp files should be written here.
  |_ deps -> dependencies folder containing (Gyp & Djinni)
  |_ djinni -> interface between cpp & java/objc, names of the interface functions should match those of a cpp file.
  |_ lib/librncpp.gyp -> defines names, files & directories for libraries which will be built & used in java & objC
  |_ index.js -> JS code using C++ code defined in src/cpp
|_ Makefile -> Make file that's used for fetching & building dependencies, building GypAndroid.mk.
|_ run_djinni.sh -> generates all c++, java, objc code for interfaces.
|_ index.*.js -> entry point for ReactNative


```
(TestCPP.java & TestPackage.java are taken from [ReactNative Docs](https://facebook.github.io/react-native/docs/native-modules-android.html))
## Okay, Where do I start writing? 
well, you need to modify two things
  1. [Djinni file](https://github.com/abdoofathy95/ReactNativeWithCPP/tree/master/src/djinni): this simply defines the interfaces that will be used, you can read more [Here](https://github.com/dropbox/djinni)
  2. [CPP folder](https://github.com/abdoofathy95/ReactNativeWithCPP/tree/master/src/cpp): add you cpp files.
then for 
1. **Android** you need to get to [this directory](https://github.com/abdoofathy95/ReactNativeWithCPP/tree/master/android/app/src/main/java/com/reactar) and add two java files similar to TestCPP.java & TestPackage.java
2. **IOS** NOT YET.
then simply run using 
``` react-native run-android ``` and the building should start

Most of this is taken from the example in the Djinni repo
